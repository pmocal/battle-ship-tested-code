(function(t){function e(e){for(var i,r,o=e[0],h=e[1],u=e[2],c=0,l=[];c<o.length;c++)r=o[c],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&l.push(a[r][0]),a[r]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(t[i]=h[i]);p&&p(e);while(l.length)l.shift()();return n.push.apply(n,u||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],i=!0,o=1;o<s.length;o++){var h=s[o];0!==a[h]&&(i=!1)}i&&(n.splice(e--,1),t=r(r.s=s[0]))}return t}var i={},a={app:0},n=[];function r(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=i,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(s,i,function(e){return t[e]}.bind(null,i));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],h=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var p=h;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"1ae0":function(t,e,s){"use strict";var i=s("f2e9"),a=s.n(i);a.a},"2d6f":function(t,e,s){"use strict";var i=s("4e77"),a=s.n(i);a.a},"4e77":function(t,e,s){},"555a":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var i=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[t.showBattleship?t._e():s("div",{attrs:{id:"title"}},[s("h1",[t._v("Welcome to the Battleship game.")]),s("button",{ref:"startButton",on:{click:t.start}},[t._v("\n\t\t\tStart game!\n\t\t")])]),s("div",{attrs:{id:"game"}},[s("BattleshipSetup",{attrs:{"show-battleship":t.showBattleship,DIMENSIONS:t.DIMENSIONS},on:{signalFlare:t.passSignalToGame}}),s("BattleshipGame",{attrs:{"show-battleship":t.showBattleship,DIMENSIONS:t.DIMENSIONS,"ship-signal":t.shipSignal}})],1)])},n=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.showBattleship?s("div",[s("div",{attrs:{id:"gameScreen"}},[s("h1",[t._v("Game Board")]),s("p",{ref:"messageBoard",staticClass:"messageBoard"},[t._v(" "+t._s(this.$store.state.message)+" ")]),s("BattleshipGameBoard",{ref:"human",attrs:{name:"Human",ships:this.$store.state.humanShips,DIMENSIONS:t.DIMENSIONS,"ship-signal":t.shipSignal}}),s("BattleshipGameBoard",{ref:"computer",attrs:{name:"Computer",ships:this.$store.state.computerShips,DIMENSIONS:t.DIMENSIONS,"ship-signal":t.shipSignal}})],1),t.shipSignal?s("button",{ref:"gameStart",on:{click:t.start}},[t._v("\n\t\tStart game\n\t")]):t._e()]):t._e()},o=[],h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("p",{class:t.name},[t._v(t._s(t.name))]),s("div",{ref:t.name,staticClass:"grid-container",class:t.name},t._l(t.rows,(function(e,i){return s("div",{key:e.uuid},t._l(e,(function(e,a){return s("div",{key:e.uuid,class:[{selected:t.rowsBooleans[i][a]},t.getSquareClass(e)],on:{click:function(e){return t.uponAttack(i,a)}}},[t._v("\n\t\t\t\t"+t._s(e)+"\n\n\t\t\t")])})),0)})),0)])},u=[],p={name:"BattleshipGameBoard",props:{name:String,ships:Array,DIMENSIONS:Array,shipSignal:Boolean},data(){return{spacesAttackedByComputer:[],EMPTY_SPACE:"-",rows:[],rowsBooleans:[],previousMoveHit:!1}},watch:{shipSignal:function(){this.placeShips()}},created(){this.rows=new Array(this.DIMENSIONS[0]).fill(this.EMPTY_SPACE),this.rowsBooleans=new Array(this.DIMENSIONS[0]).fill(!1);for(let t=0;t<this.rows.length;t++)this.$set(this.rows,t,new Array(this.DIMENSIONS[1]).fill(this.EMPTY_SPACE)),this.$set(this.rowsBooleans,t,new Array(this.DIMENSIONS[1]).fill(!1))},methods:{placeShips(){for(let e=0;e<this.ships.length;e++){var t=this.ships[e].getLocation();for(let s=0;s<this.ships[e].getLength();s++)this.rows[t[0]].splice(t[1]+s,1,e)}},uponAttack(t,e){function s(t){return"number"===typeof t}this.rowsBooleans[t].splice(e,1,!0),s(this.rows[t][e])?("Human"===this.name&&(this.previousMoveHit=!0),this.$store.commit({type:"hitShip",key:this.name,index:this.rows[t][e]}),this.$store.commit("changeMessage",this.name+" got hit!")):("Human"===this.name&&(this.previousMoveHit=!1),this.$store.commit("changeMessage","miss!"))},getSquareClass(t){if(t!=this.EMPTY_SPACE)return"ship"},computerAttack(){var t,e,s;do{if(this.previousMoveHit&&s){let s=Math.round(Math.random());0===s&&(s=-1),t=this.spacesAttackedByComputer[this.spacesAttackedByComputer.length-1][0],e=this.spacesAttackedByComputer[this.spacesAttackedByComputer.length-1][1]+s}else t=Math.round(Math.random()*(this.DIMENSIONS[0]-1)),e=Math.round(Math.random()*(this.DIMENSIONS[1]-1));s=!0;for(let i=0;i<this.spacesAttackedByComputer.length;i++){let a=this.spacesAttackedByComputer[i];t===a[0]&&e===a[1]&&(s=!1)}console.log("dowhile")}while(!s);this.spacesAttackedByComputer.push([t,e]),this.uponAttack(t,e)},humanAttackBegin(){this.$refs.Computer.style.pointerEvents="auto"},humanAttackEnd(){this.$refs.Computer.style.pointerEvents="none"},humanTurnFinished(){var t=this;return new Promise((function(e){t.$refs.Computer.onclick=e}))}}},c=p,l=(s("1ae0"),s("2877")),m=Object(l["a"])(c,h,u,!1,null,"5eb46041",null),S=m.exports,d={name:"BattleshipGame",components:{BattleshipGameBoard:S},props:{showBattleship:Boolean,DIMENSIONS:Array,shipSignal:Boolean},methods:{sleep(t){return new Promise(e=>setTimeout(e,t))},async start(){this.$refs.gameStart.style.display="none";while(0==this.$store.getters.humanShipsSunk()&&0==this.$store.getters.computerShipsSunk())this.$store.commit("changeMessage","Computer's turn!"),this.$refs.messageBoard.style.color="darkred",this.$refs.messageBoard.style.display="block",await this.sleep(1e3),this.$refs.human.computerAttack(),this.$store.commit("changeMessage","Human's turn to attack! Click on a computer space."),this.$refs.messageBoard.style.color="darkgreen",this.$refs.computer.humanAttackBegin(),await this.$refs.computer.humanTurnFinished(),this.$refs.computer.humanAttackEnd(),console.log("while");1==this.$store.getters.humanShipsSunk()&&1==this.$store.getters.computerShipsSunk()?this.$store.commit("changeMessage","TIE GAME!"):1==this.$store.getters.humanShipsSunk()?this.$store.commit("changeMessage","COMPUTER WINS."):1==this.$store.getters.computerShipsSunk()&&this.$store.commit("changeMessage","Human wins!")}}},f=d,g=(s("2d6f"),Object(l["a"])(f,r,o,!1,null,"3f182b76",null)),v=g.exports,M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.showBattleshipSetup&&t.showBattleship?s("div",{attrs:{id:"gameSetup"}},[s("h1",[t._v("Ship Placement Phase")]),s("div",{attrs:{id:"instructions"}},[s("p",{staticClass:"instructions"},[s("span",[t._v("Place your ships, human!")]),t._v(" You get "+t._s(t.NUMSHIPS)+".")]),s("p",{staticClass:"instructions"},[t._v("Enter coordinates for each ship. The length of each ship is listed. Ships are placed vertically so the coordinates are where the top of the ship lies.")]),s("p",{staticClass:"instructions"},[t._v("Choose carefully so that your ships fit. If any of them extend off the grid I'll make you swab the decks (and redo your choice of coordinates).")]),t._m(0),s("p",{staticClass:"instructions"},[t._v("Click the button when you are done. Your enemy's ships are the same size as yours. But you'll have to find theirs before they find yours. Good luck.")])]),s("div",{attrs:{id:"ships"}},t._l(t.shipLengths,(function(e,i){return s("p",{key:i},[t._v("\n\t\t\t\n\t\t\tLength of ship: "),s("span",[s("code",[t._v(t._s(e))])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.humanShipLocations[i],expression:"humanShipLocations[index]"}],attrs:{placeholder:"ship location"},domProps:{value:t.humanShipLocations[i]},on:{input:function(e){e.target.composing||t.$set(t.humanShipLocations,i,e.target.value)}}})])})),0),s("button",{on:{click:t.addShips}},[t._v(" Add ships to board")]),s("p",{staticClass:"messageBoard"},[t._v(" "+t._s(this.$store.state.message)+" ")])]):t._e()},y=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"instructions"},[t._v("Each set of coordinates should be in the format "),s("code",[t._v("[x, y]")]),t._v(" where "),s("code",[t._v("x")]),t._v(" and "),s("code",[t._v("y")]),t._v(" both are both integers ranging from "),s("code",[t._v("[0, 9]")]),t._v(".")])}];const I=(t,e)=>{var s=t;function i(){return s}function a(){return t}function n(){return e}function r(){s>0&&(s-=1)}function o(){return 0===s}return{getLength:a,getLocation:n,getHitsRemaining:i,hit:r,isSunk:o}};var N=I,w={name:"BattleshipSetup",props:{showBattleship:Boolean,DIMENSIONS:Array},created(){for(let t=0;t<this.NUMSHIPS;t++)this.shipLengths.push(Math.ceil(Math.random()*(this.DIMENSIONS[1]-1)))},data(){return{NUMSHIPS:5,NUMTRIES:500,shipLengths:[],humanShipLocations:[],humanShips:[],computerShips:[],showBattleshipSetup:!0}},methods:{addShips(){var t=[];for(let i=0;i<this.NUMSHIPS;i++)t.push(JSON.parse(this.humanShipLocations[i]));var e=0;if(this.validateShipLocations(t)){var s;do{s=this.generateComputerLocations(),e+=1}while(!1===this.validateShipLocations(s)&&e<this.NUMTRIES);for(let e=0;e<this.NUMSHIPS;e++)this.humanShips.push(N(this.shipLengths[e],t[e])),this.computerShips.push(N(this.shipLengths[e],s[e]));e==this.NUMTRIES?this.$store.commit("changeMessage","Game crashed, sorry--contact administrator."):(this.showBattleshipSetup=!1,this.$store.commit("setHumanShips",this.humanShips),this.$store.commit("setComputerShips",this.computerShips),this.$emit("signalFlare"))}},generateComputerLocations(){var t=[];for(let e=0;e<this.NUMSHIPS;e++)t.push([Math.round(Math.random()*(this.DIMENSIONS[1]-1)),Math.round(Math.random()*(this.DIMENSIONS[1]-this.shipLengths[e]))]);return t},validateShipLocations(t){if(t.length!=this.NUMSHIPS)return this.$store.commit("changeMessage","Fill out all of the ship locations!"),!1;for(let e=0;e<this.NUMSHIPS;e++)if("[object Array]"!=Object.prototype.toString.call(t[e])||2!=t[e].length)return this.$store.commit("changeMessage","All ship locations must be coordinates."),!1;for(let e=0;e<this.NUMSHIPS;e++)if(t[e][0]>this.DIMENSIONS[0]||t[e][1]>this.DIMENSIONS[1]||t[e][0]<0||t[e][1]<0)return this.$store.commit("changeMessage","All ship locations must be coordinates within the board."),!1;for(let e=0;e<this.NUMSHIPS-1;e++)for(let s=e+1;s<this.NUMSHIPS;s++)if(t[e][0]===t[s][0]){if(t[e][1]===t[s][1])return this.$store.commit("changeMessage","All ship locations must be different."),!1;if(t[e][1]>t[s][1]&&t[e][1]+this.shipLengths[e]>t[s][1])return this.$store.commit("changeMessage","Ships must not overlap."),!1;if(t[e][1]>t[s][1]&&t[e][1]+this.shipLengths[e]>t[s][1])return this.$store.commit("changeMessage","Ships must not overlap."),!1}return!0}}},_=w,B=(s("9e0d"),Object(l["a"])(_,M,y,!1,null,"a2a103b8",null)),k=B.exports,$=s("2f62");i["a"].use($["a"]);const E=new $["a"].Store({state:{humanShips:[],computerShips:[],message:""},mutations:{changeMessage(t,e){t.message=e},setHumanShips(t,e){t.humanShips=e},setComputerShips(t,e){t.computerShips=e},hitShip(t,e){"Human"===e.key?t.humanShips[e.index].hit():"Computer"===e.key&&t.computerShips[e.index].hit()}},getters:{humanShipsSunk:t=>()=>{return 0==t.humanShips.filter(t=>!t.isSunk()).length},computerShipsSunk:t=>()=>{return 0==t.computerShips.filter(t=>!t.isSunk()).length}}});var b={name:"app",store:E,components:{BattleshipGame:v,BattleshipSetup:k},data(){return{showBattleship:!1,DIMENSIONS:[10,10],shipSignal:!1}},methods:{start(){this.$refs.startButton.style.display="none",this.showBattleship=!0},passSignalToGame(){this.shipSignal=!0}}},O=b,C=(s("776c"),Object(l["a"])(O,a,n,!1,null,"0c8ce5c3",null)),A=C.exports;i["a"].config.productionTip=!1,new i["a"]({render:t=>t(A)}).$mount("#app")},"5e34":function(t,e,s){},"776c":function(t,e,s){"use strict";var i=s("5e34"),a=s.n(i);a.a},"9e0d":function(t,e,s){"use strict";var i=s("555a"),a=s.n(i);a.a},f2e9:function(t,e,s){}});
//# sourceMappingURL=app.d759e82a.js.map